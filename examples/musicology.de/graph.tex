% scikeds Extract German (Template)
%
% (c) Karsten Reincke, Frankfurt a.M. 2012, ff.
%
% This text is licensed under the Creative Commons Attribution 3.0 Germany
% License (http://creativecommons.org/licenses/by/3.0/de/): Feel free to share
% (to copy, distribute and transmit) or to remix (to adapt) it, if you respect
% how you must attribute the work in the manner specified by the author(s):
% \newline
% In an internet based reuse please link the reused parts to scikeds.fodina.de
% and mention the original author Karsten Reincke in a suitable manner. In a
% paper-like reuse please insert a short hint to scikeds.fodina.de and to the
% original author, Karsten Reincke, into your preface. For normal quotations
% please use the scientific standard to cite
%
% select the document class
% S.26: [ 10pt|11pt|12pt onecolumn|twocolumn oneside|twoside notitlepage|titlepage final|draft
%         leqno fleqn openbib a4paper|a5paper|b5paper|letterpaper|legalpaper|executivepaper openrigth ]
% S.25: { article|report|book|letter ... }
%
% oder koma-skript S.10 + 16
\documentclass[
  DIV=calc,
  BCOR=5mm,
  11pt,
  headings=small,
  oneside,
  abstract=true,
  toc=bib,
  xcolor=dvipsnames,
  english,ngerman]{scrartcl}
  
%%% (1) general configurations %%%
\usepackage[utf8]{inputenc}

%%% (2) language specific configurations %%%
\usepackage[]{a4,babel}
\selectlanguage{ngerman}

% package for improving the grey value and the line feed handling
\usepackage{microtype}






%%% (4) general package activation %%%

\usepackage[dvips]{epsfig}
\usepackage[usenames,dvipsnames]{pstricks}

% graphic
\usepackage{graphicx,color}





\usepackage{tikz}
\usetikzlibrary{arrows}
\usetikzlibrary{shapes,snakes}





\usepackage{amssymb}

\usepackage{wasysym}
\usepackage{harmony}
\usepackage{musicography}
\usepackage{abc}
\usepackage{musixtex}
\usepackage{graphicx,color}
\usepackage{tabulary}
\usepackage{longtable}
\usepackage{threeparttablex}

% package for macking tables with broken lines
\usepackage{multirow}
% -- Basic Colors ---
% LilyPond colors:
\newcommand{\lyColor}[0]{RoyalBlue}
\newcommand{\lyBgColor}[0]{RoyalBlue!10}
% MusicXML colors:
\newcommand{\mxmlColor}[0]{OliveGreen}
\newcommand{\mxmlBgColor}[0]{OliveGreen!10}
% ABC colors:
\newcommand{\abcColor}[0]{Plum}
\newcommand{\abcBgColor}[0]{Plum!10}

% PMX colors:
\newcommand{\pmxColor}[0]{Orange}
\newcommand{\pmxBgColor}[0]{Orange!10}

% MusiXTeX colors:
\newcommand{\mtexColor}[0]{Magenta}
\newcommand{\mtexBgColor}[0]{Magenta!10}

% Xtra colors
\newcommand{\multiBgColor}[0]{Black!10}
\newcommand{\pdfBgColor}[0]{Gray!10}
\newcommand{\backendBgColor}[0]{Yellow!10}

% -- IO Colors ---

\newcommand{\abcInColor}[0]{\abcBgColor}
\newcommand{\abcOutColor}[0]{\abcColor}

\newcommand{\mxmlInColor}[0]{\mxmlBgColor}
\newcommand{\mxmlOutColor}[0]{\mxmlColor}

\newcommand{\lyInColor}[0]{\lyBgColor}
\newcommand{\lyOutColor}[0]{\lyColor}

\newcommand{\pmxInColor}[0]{\pmxBgColor}
\newcommand{\pmxOutColor}[0]{\pmxColor}

\newcommand{\mtexInColor}[0]{\mtexBgColor}
\newcommand{\mtexOutColor}[0]{\mtexColor}

% -- Node types---

\newcommand{\converter}[6]{
  \node[trapezium stretches body, 
  fill=#1, text=#2] (#3) at (#4,#5) { \textbf{\sffamily{#6}} };
}

\newcommand{\backend}[6]{
  \node[trapezium stretches body, minimum height=0.75cm,
  fill=#1, text=#2] (#3) at (#4,#5) { \textbf{#6} };
}

\newcommand{\file}[6]{ 
  \node[rectangle,draw,text width=0.8cm, 
  fill=#1, text=#2] (#3) at (#4,#5) { \textbf{\ttfamily{#6}} };
}

\newcommand{\frontend}[6]{
  \node[rectangle, rounded corners, minimum height=0.75cm,
  fill=#1, text=#2] (#3) at (#4,#5) { \textbf{#6} };
}

\newcommand{\ra}[0]{$\rightarrow$}

\begin{document}


Test
\begin{small}

\begin{ThreePartTable}
\begin{TableNotes}
\item[a] Die Prozessgüte PG wird gemäß der Tabelle in den folgenden Kapiteln emiprisch ermittel.
\item[b] Die Frontends und Backends sind bereits mit bis zu maximal 5 Sternen
klassifierziert worden. [DEF-1] Seien $stars(FE)$ die Anzahl der Frontendsterne,
$stars(BE)$ die Anzahl der Backendsterne und $\Sigma$ die Anzahl der notwendigen
Konvertierungensschritte, um den Output des Frontends dem Backend als Input
vorlegen zu können. [DEF-2]: $PROZESSREIFE (PR) :- (stars(FE) + stars(BE) - \Sigma) * PG$.
Also [LM-1]: max(PR) = 5 + 5 - 0 * 1. [DEF-3] Normierte Prozessreife (NPR) = PR/max(PR).
Umgangssprachlich würde man sagen, dass die Systemqualität in \% der maximalen Prozessreife
angegeben wird.
\end{TableNotes}
\begin{longtable}{|c|c|c|c|c|c||c||c||}

% was soll am Anfang oben scheinen:
\hline
  \multicolumn{2}{|c}{VON} & \multicolumn{2}{|c}{ÜBER} & 
  \multicolumn{2}{|c||}{NACH} & \multicolumn{2}{c||}{WERTUNG} \\
\hline
  Frontend & $\bigstar$ & Konvertierung & $\Sigma$  & \LaTeX\ \& & $\bigstar$ & 
  PG\tnote{a} & NPR\tnote{b}\\
\hline
\hline
\endfirsthead

% was soll bei jedem Seitenumnruch oben scheinen:
\multicolumn{4}{c}%
{\tablename\ \thetable\ -- \textit{Continued from previous page}} \\
\hline
\multicolumn{2}{|c}{VON} & \multicolumn{2}{|c}{ÜBER} & \multicolumn{2}{|c||}{NACH} & \multicolumn{2}{c||}{WERTUNG} \\
\hline
  Frontend & $\bigstar$ & Konvertierung & $\Sigma$  & \LaTeX\ \& & $\bigstar$ & 
  PG\tnote{a} & NPR\tnote{b}\\
\hline
\hline
\endfirsthead

% was soll bei jedem Seitenumnruch unter scheinen:
\hline \multicolumn{4}{r}{\textit{Continued on next page}} \\
\endfoot

% was am Ende erscheinen:
\hline
\insertTableNotes
\endlastfoot

 Easy\-ABC & 4 & \ra\ & 0 &  ABC & 3 & 1 & 7 \\
\hline
 Easy\-ABC & 4 & \ra\ xml2abc \ra\  & 1 &  ABC & 3 & 1 & 6 \\
\hline
 Easy\-ABC & 4 & \ra\ mxml2abc \ra\  & 1 &  ABC & 3 & 1 & 6 \\
\hline
 Easy\-ABC & 4 & \ra\ abc2ly \ra\ ly2abc \ra\ & 2 &  ABC & 3 & 1 & 5 \\
\hline
 Rose\-garden & 3 & \ra\ xml2abc \ra\ & 1 & ABC & 3 & 1 & 5 \\
\hline 
Rose\-garden & 3 & \ra\ mxml2ly \ra\ ly2abc \ra\ & 2 &  ABC & 3 & 1 &  4 \\
\hline
Rose\-garden & 3 & \ra\ xml2ly \ra\ ly2abc \ra\ & 2 &  ABC & 3 & 1 & 4 \\
\hline
 Muse\-Score & 5 & \ra\ xml2abc \ra\ & 1 & ABC & 3 & 1 & 7 \\
\hline
 Muse\-Score & 5 & \ra\ mxml2ly \ra\ ly2abc \ra\ & 2 &  ABC & 3 & 1 & 6 \\
\hline
 Muse\-Score & 5 & \ra\ xml2ly \ra\ ly2abc \ra\ & 2 &  ABC & 3 & 1 & 6 \\
\hline
 Denemo & 3 & \ra\ xml2abc \ra\ & 1 & ABC & 3 & 1 & 5 \\
\hline
 Denemo & 3 & \ra\ mxml2ly \ra\ ly2abc \ra\ & 2 &  ABC & 3 & 1 & 4 \\
\hline
 Denemo & 3 & \ra\ xml2ly \ra\ ly2abc \ra\ & 2 &  ABC & 3 & 1 &  4 \\
\hline
 Canorus & 3 & \ra\ xml2abc \ra\ & 1 & ABC & 3 & 1 & 5 \\
\hline
 Canorus & 3 & \ra\ mxml2ly \ra\ ly2abc \ra\ & 2 &  ABC & 3 & 1 & 4 \\
\hline
 Canorus & 3 & \ra\ xml2ly \ra\ ly2abc \ra\ & 2 &  ABC & 3 & 1 & 4 \\
\hline
 Texteditor & 1 & \ra\ & 0 &  ABC & 3 & 1 & 4 \\
\hline
\hline
EasyABC & 4 & \ra\ abc2mtex \ra\ & 1 &  Musix\TeX\ & 4 & 1 & 7 \\
\hline
EasyABC & 4 & \ra\ mxml2pmx \ra\ pmxab \ra\ & 2 &  Musix\TeX\ & 4 & 1 & 6 \\
\hline
Rosegarden & 3 & \ra\ mxml2pmx \ra\ pmxab \ra\ & 2 &  Musix\TeX\ & 4 & 1 & 5 \\
\hline
MuseScore & 5 & \ra\ mxml2pmx \ra\ pmxab \ra\ & 2 &  Musix\TeX\ & 4 & 1 & 7 \\
\hline
Denemo & 3 & \ra\ mxml2pmx \ra\ pmxab \ra\ & 2 &  Musix\TeX\ & 4 & 1 & 5 \\
\hline
Canorus & 3 & \ra\ mxml2pmx \ra\ pmxab \ra\ & 2 &  Musix\TeX\ & 4 & 1 & 5 \\
\hline
Texteditor & 1 & \ra\ & 0 &  Musix\TeX\ & 4 & 1 & 5 \\
\hline
Texteditor & 1 & \ra\ pmxab \ra\ & 1 &  Musix\TeX\ & 4 & 1 & 4 \\
\hline
\hline
 Easy\-ABC & 4 & \ra xml2ly \ra\ Elysium \ra\ & 2 & LilyPond & 5 & 1 & 7 \\
\hline
 Easy\-ABC & 4 & \ra xml2ly \ra\ Frescobaldi \ra\ & 2 & LilyPond & 5 & 1 & 7 \\
\hline
 Rosegarden & 3 & \ra xml2ly \ra\ Elysium \ra\ & 2 & LilyPond & 5 & 1 & 6 \\
\hline
 Rosegarden & 3 & \ra xml2ly \ra\ Frescobaldi \ra\ & 2 & LilyPond & 5 & 1 & 6 \\
\hline
 MuseScore & 5 & \ra xml2ly \ra\ Elysium \ra\ & 2 & LilyPond & 5 & 1 & 8 \\
\hline
 MuseScore & 5 & \ra xml2ly \ra\ Frescobaldi \ra\ & 2 & LilyPond & 5 & 1 & 8 \\
\hline
Denemo & 3 & \ra xml2ly \ra\ Elysium \ra\ & 2 & LilyPond & 5 & 1 & 6 \\
\hline
Denemo & 3 & \ra xml2ly \ra\ Frescobaldi \ra\ & 2 & LilyPond & 5 & 1 & 6 \\
\hline
Canorus & 3 & \ra xml2ly \ra\ Elysium \ra\ & 2 & LilyPond & 5 & 1 & 6 \\
\hline
Canorus & 3 & \ra xml2ly \ra\ Frescobaldi \ra\ & 2 & LilyPond & 5 & 1 & 6 \\
\hline
\hline
 Text-Editor & 1 & \ra\ & 0 &  LilyPond & 5 & 1 & 6 \\
\hline
 Elysium & 4 & \ra\ & 0 &  LilyPond & 5 & 1 & 9 \\
\hline
 Frescobaldi & 5 & \ra\ & 0 &  LilyPond & 5 & 1 & 10 \\
\hline
\hline
\end{longtable}
\end{ThreePartTable}
\end{small}

Achtung: Frescobalid, Texteditor als Anreichungstools müssen als Belastung mehr als
eine vollautomatisierte Konvertierung sein (>1) aber nicht alle geleich viel.
Deshalb sei  ihr Konvertierungs wert 1+1/stars(FE) (je besser das FE, desto geringe die Belastung zusätzölich zum Schritt)


\begin{center}
\renewcommand{\arraystretch}{1.5}
\begin{tabulary}{14cm}{|C|R||C|C|C|C||}
\cline{3-6}
 \multicolumn{2}{c||}{Prozessgüte = } & \multicolumn{4}{c||}{Technische Ausführbarkeit (TA)} \\
\cline{3-6}
 \multicolumn{2}{c||}{E * TA} & problemlos & stolpernd & beschränkt & unmöglich \\
\hline
\multirow{4}{*}{\rotatebox{90}{Ergebnis (E)}} & exzel\-lent & \centering{1} & 0.8 & 0.6 & 0 \\
\cline{2-6}
 & akzep\-tabel & 0.8 & 0.6 & 0.4 & 0 \\
\cline{2-6}
 & grenz\-wertig & 0.6 & 0.4 & 0.2 & 0 \\
\cline{2-6}
 & inakzep\-tabel & 0 & 0 & 0 & 0 \\
\hline
\hline
\end{tabulary}
\renewcommand{\arraystretch}{1}
\end{center}

\newpage
\begin{center}
\begin{tikzpicture}
\footnotesize

\tikzstyle{every node}=[trapezium, draw, minimum width=1cm,trapezium left angle=70, trapezium right angle=110]

% BOTTOM UP DESCRIPTION of the component IO structure:
% THE FINALLY GENERATED PDF OUTPOUT ->
\file{\pdfBgColor}{Black}{PDF}{0}{0}{.pdf}
% -> CREATED BY THE LATEX IDEs ->
\backend{\backendBgColor}{\mtexColor}{BACKEND}{0}{1}{Backend Generator (\LaTeX\ \& X)}
% -> which takes the ouput ->
\file{\mtexBgColor}{\mtexColor}{BIN}{0}{2}{.bin}

\converter{\multiBgColor}{\mtexColor}{CONVERTER}{0}{3}{fout2bin}

\file{\multiBgColor}{Black}{FOUT}{0}{4}{.fout}

% created by the frontend ->
\frontend{\multiBgColor}{Black}{FRONTEND}{0}{5}{Frontend (Editor)};
% which are used by the Composer:
\node[circle,draw=none] (Composer) at (0,7) 
{ \includegraphics{./decider-220x320.eps}};
  
% TOP DOWN linkings of the component IO structure:  
\draw[->,Gray] (Composer) to [out=270,in=90] (FRONTEND);
\draw[->,Gray] (FRONTEND) to [out=270,in=90] (FOUT);
\draw[->,Gray] (FOUT) to [out=270,in=90] (CONVERTER);
\draw[->,\mtexColor] (CONVERTER) to [out=270,in=90] (BIN);

\draw[->,\mtexColor] (BIN) to [out=270,in=90] (BACKEND);
\draw[->,Gray] (BACKEND) to [out=270,in=90] (PDF);

\end{tikzpicture}
\end{center}

\begin{tikzpicture}
\footnotesize

\tikzstyle{every node}=[trapezium, draw, minimum width=1cm,trapezium left angle=70, trapezium right angle=110]

% BOTTOM UP DESCRIPTION of the component IO structure:
% THE FINALLY GENERATED PDF OUTPOUT ->
\file{\pdfBgColor}{Black}{PDF}{5.5}{0}{.pdf}

% -> CREATED BY THE LATEX IDEs ->
\backend{\backendBgColor}{\abcColor}{LTXABC}{1}{2}{\LaTeX(-IDE) \& ABC}
\backend{\backendBgColor}{\mtexColor}{LTXMTEX}{5.5}{2}{\LaTeX(-IDE) \& MusiX\TeX}
\backend{\backendBgColor}{\lyColor}{LTXLIPO}{10.4}{2}{\LaTeX(-IDE) \& LilyPond}

% -> which take the CONVERTER OUTPUT ->
\file{\abcBgColor}{\abcColor}{CO-ABC}{1}{3}{.abc}
\file{\mtexBgColor}{\mtexColor}{CO-MTEX}{5.5}{3}{.mtex}
\file{\lyBgColor}{Blue}{CO-LY}{10.4}{3}{.ly}

% written by the CONVERTERs.
\converter{\mxmlInColor}{\abcOutColor}{XML2ABC}{0}{7}{xml2abc}
\converter{\mxmlInColor}{\abcOutColor}{MXML2ABC}{1.5}{6}{mxml2abc}
\converter{\mxmlInColor}{\pmxOutColor}{MXML2PMX}{3.5}{8}{mxml2pmx}
\converter{\mxmlInColor}{\lyOutColor}{XML2LY}{4}{11}{xml2ly}
\converter{\mxmlInColor}{\lyOutColor}{MXML2LY}{4.5}{14}{mxml2ly}

\converter{\abcInColor}{\mtexOutColor}{ABC2MTEX}{3}{4}{abc2mtex!}
\converter{\abcInColor}{\lyOutColor}{ABC2LY}{5}{12}{abc2ly!}

\converter{\lyInColor}{\abcOutColor}{LY2ABC}{5.5}{8}{ly2abc!}
\converter{\pmxInColor}{\mtexOutColor}{PMXAB}{5.5}{4}{pmxab!}


% These converters takte the FRONTEND OUTPUT ->

\file{\abcBgColor}{\abcColor}{FO-ABC}{0}{15}{.abc}
\file{\mxmlBgColor}{\mxmlColor}{FO-MXML}{1.5}{15}{.mxml}
\file{\pmxBgColor}{Brown}{FO-PMX}{5.5}{5}{.pmx}
\file{\lyBgColor}{Blue}{FO-LY}{7.2}{11}{.ly!}

% created by the FRONTENDS ->

\frontend{\abcBgColor}{Black}{EASYABC}{0}{18.5}{EasyABC};
\frontend{\lyBgColor}{Black}{ROSEGARDEN}{2.2}{18.5}{Rosegarden};
\frontend{\multiBgColor}{Black}{MUSESCORE}{4.5}{18.5}{MuseScore};
\frontend{\lyBgColor}{Black}{DENEMO}{6.5}{18.5}{Denemo};
\frontend{\lyBgColor}{Black}{CANORUS}{8.3}{18.5}{Canorus};

\frontend{\multiBgColor}{Black}{EDITOR}{7.8}{8}{Text-Editor};
\frontend{\lyBgColor}{Black}{ELYSIUM}{9.8}{8}{Elysium};
\frontend{\lyBgColor}{Black}{FRESCOBALDI}{11.8}{8}{Frescobaldi};

% which are used by the Composer:

\node[circle,draw=none] (Composer) at (6.5,21) 
{ \includegraphics{./decider-220x320.eps}};
  
% TOP DOWN linkings of the component IO structure:  
  
% (1) The composer uses the frontends.
\draw[->] (Composer) to [out=180,in=90] (EASYABC);  
\draw[->] (Composer) to [out=180,in=90] (ROSEGARDEN); 
\draw[->] (Composer) to [out=270,in=90] (MUSESCORE);  
\draw[->] (Composer) to [out=270,in=90] (DENEMO);  
\draw[->] (Composer) to [out=270,in=90] (CANORUS);  
\draw[->] (Composer) to [out=0,in=90] (ELYSIUM);  
\draw[->] (Composer) to [out=0,in=90] (FRESCOBALDI);  
\draw[->] (Composer) to [out=0,in=90] (EDITOR);  

 
% (2.A) The frontends write the frontend output  
\draw[->,\abcColor] (EASYABC) to [out=270,in=90] (FO-ABC); 
\draw[->,\abcColor] (EASYABC) to [out=240,in=140] (CO-ABC); 
\draw[->,\mxmlColor] (EASYABC) to [out=300,in=90] (FO-MXML); 

\draw[->,\lyColor] (ROSEGARDEN) to [out=300,in=90] (FO-LY); 
\draw[->,\mxmlColor] (ROSEGARDEN) to [out=240,in=90] (FO-MXML);

\draw[->,\mxmlColor] (MUSESCORE) to [out=240,in=90] (FO-MXML); 

\draw[->,\mxmlColor] (CANORUS) to [out=240,in=90] (FO-MXML); 
\draw[->,\lyColor] (CANORUS) to [out=270,in=90] (FO-LY); 

\draw[->,\mxmlColor] (DENEMO) to [out=240,in=90] (FO-MXML); 
\draw[->,\lyColor] (DENEMO) to [out=270,in=90] (FO-LY); 


\draw[->,\abcColor] (EDITOR) to [out=270,in=90] (CO-ABC);
\draw[->,\mtexColor] (EDITOR) to [out=270,in=0] (CO-MTEX);
\draw[->,\pmxColor] (EDITOR) to [out=270,in=90] (FO-PMX);

\draw[->,\lyColor] (EDITOR) to [out=270,in=90] (CO-LY);
\draw[->,\lyColor] (ELYSIUM) to [out=270,in=90] (CO-LY); 
\draw[->,\lyColor] (FRESCOBALDI) to [out=270,in=90] (CO-LY); 

% (3) The frontend output becomes input of the converter

\draw[->,\abcColor] (FO-ABC) to [out=270,in=90] (ABC2MTEX);
\draw[->,\abcColor] (FO-ABC) to [out=270,in=90] (ABC2LY);

\draw[->,\mxmlColor] (FO-MXML) to [out=270,in=90] (XML2ABC);
\draw[->,\mxmlColor] (FO-MXML) to [out=270,in=90] (MXML2ABC);
\draw[->,\mxmlColor] (FO-MXML) to [out=270,in=90] (XML2LY);
\draw[->,\mxmlColor] (FO-MXML) to [out=270,in=90] (MXML2LY);
\draw[->,\mxmlColor] (FO-MXML) to [out=270,in=90] (MXML2PMX);

\draw[->,\lyColor] (FO-LY) to [out=270,in=90] (LY2ABC); 
%\draw[->,\lyColor] (FO-LY) to [out=270,in=90] (EDITOR); 
\draw[->,\lyColor] (FO-LY) to [out=270,in=90] (ELYSIUM); 
\draw[->,\lyColor] (FO-LY) to [out=270,in=90] (FRESCOBALDI); 

% (3) The converters (re)write their output
% (3.A) as input for the textual frontends
\draw[->,\lyColor] (ABC2LY) to [out=270,in=90] (FO-LY);
\draw[->,\lyColor] (MXML2LY) to [out=270,in=90] (FO-LY); 
\draw[->,\lyColor] (XML2LY) to [out=270,in=90] (FO-LY); 

% (3.B) as input for the backends

\draw[->,\abcColor] (LY2ABC) to [out=270,in=90] (CO-ABC);
\draw[->,\abcColor] (XML2ABC) to [out=270,in=90] (CO-ABC);
\draw[->,\abcColor] (MXML2ABC) to [out=270,in=90] (CO-ABC);

\draw[->,\pmxColor] (MXML2PMX) to [out=270,in=90] (FO-PMX);
\draw[->,\mtexColor] (ABC2MTEX) to [out=270,in=180] (CO-MTEX);

% special case MusiXTeX
\draw[->,\pmxColor] (FO-PMX) to [out=270,in=90] (PMXAB);
\draw[->,\mtexColor] (PMXAB) to [out=270,in=90] (CO-MTEX);

% 4) The backends take the (converter) output as input
\draw[->,\abcColor] (CO-ABC) to [out=270,in=90] (LTXABC);
\draw[->,\mtexColor] (CO-MTEX) to [out=270,in=90] (LTXMTEX);
\draw[->,\lyColor] (CO-LY) to [out=270,in=90] (LTXLIPO);

% 5) end write the final PDF

\draw[->,Black] (LTXABC) to [out=270,in=90] (PDF);
\draw[->,Black] (LTXMTEX) to [out=270,in=90] (PDF);
\draw[->,Black] (LTXLIPO) to [out=270,in=90] (PDF);


\end{tikzpicture}


\end{document}
