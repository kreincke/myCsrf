% mycsrf 'for beeing included' snippet template
%
% (c) Karsten Reincke, Frankfurt a.M. 2012, ff.
%
% This text is licensed under the Creative Commons Attribution 3.0 Germany
% License (http://creativecommons.org/licenses/by/3.0/de/): Feel free to share
% (to copy, distribute and transmit) or to remix (to adapt) it, if you respect
% how you must attribute the work in the manner specified by the author(s):
% \newline
% In an internet based reuse please link the reused parts to mycsrf.fodina.de
% and mention the original author Karsten Reincke in a suitable manner. In a
% paper-like reuse please insert a short hint to mycsrf.fodina.de and to the
% original author, Karsten Reincke, into your preface. For normal quotations
% please use the scientific standard to cite
%


Verknüpfen wir die bisher gewonnenen Informationen, gewinnen wir das folgende
Bild:


\begin{tikzpicture}
\footnotesize

\tikzstyle{every node}=[trapezium, draw, minimum width=1cm,trapezium left angle=70, trapezium right angle=110]

% BOTTOM UP DESCRIPTION of the component IO structure:
% THE FINALLY GENERATED PDF OUTPOUT ->
\file{\pdfBgColor}{black}{PDF}{5.5}{0}{.pdf}

% -> CREATED BY THE LATEX IDEs ->
\backend{$\star\star\star$}{\abcColor}{LTXABC}{1}{2}{\LaTeX\,+\,ABC}
\backend{$\star\star\star\star$}{\mtexColor}{LTXMTEX}{5.5}{2}{\LaTeX\,+\,MusiX\TeX}
\backend{$\star\star\star\star\star$}{\lyColor}{LTXLIPO}{10.4}{2}{\LaTeX\,+\,LilyPond}

% -> which take the CONVERTER OUTPUT ->
\file{\abcBgColor}{\abcColor}{CO-ABC}{1}{3}{.abc}
\file{\mtexBgColor}{\mtexColor}{CO-MTEX}{5.5}{3}{.mtex}
\file{\lyBgColor}{Blue}{CO-LY}{10.4}{3}{.ly}

% written by the CONVERTERs.
\converter{\mxmlInColor}{\abcOutColor}{XML2ABC}{1.3}{6}{xml2abc}
\converter{\mxmlInColor}{\abcOutColor}{MXML2ABC}{0}{7}{mxml2abc}
\converter{\mxmlInColor}{\pmxOutColor}{XML2PMX}{3.6}{7}{xml2pmx}
\converter{\mxmlInColor}{\lyOutColor}{MUSICXML2LY}{4.8}{8.8}{musicxml2ly}

\converter{\abcInColor}{\mtexOutColor}{ABC2MTEX}{3}{4}{abc2mtex}
\converter{\abcInColor}{\lyOutColor}{ABC2LY}{5}{10}{abc2ly}

\converter{\pmxInColor}{\mtexOutColor}{PMXAB}{5.5}{4}{pmxab}


% These converters takte the FRONTEND OUTPUT ->

\file{\abcBgColor}{\abcColor}{FO-ABC}{0}{10.8}{.abc}
\file{\mxmlBgColor}{\mxmlColor}{FO-MXML}{1.5}{10}{.mxml}
\file{\pmxBgColor}{Brown}{FO-PMX}{5.5}{5.6}{.pmx}
\file{\lyBgColor}{Blue}{FO-LY}{7}{8.8}{.ly}

% created by the FRONTENDS ->

\frontend{\abcBgColor}{Black}{EASYABC}{0}{12.5}{EasyABC}{$\star\star\star\star$};
\frontend{\lyBgColor}{Black}{ROSEGARDEN}{2.2}{13.5}{Rosegarden}{$\star\star\star$};
\frontend{\multiBgColor}{Black}{MUSESCORE}{4.5}{13.5}{MuseScore}{$\star\star\star\star\star$};
\frontend{\lyBgColor}{Black}{DENEMO}{6.5}{13.5}{Denemo}{$\star\star\star$};
\frontend{\lyBgColor}{Black}{CANORUS}{8.3}{13.5}{Canorus}{$\star\star\star$};

\frontend{\multiBgColor}{Black}{EDITOR}{7.7}{7.2}{Text-Editor}{$\star$};
\frontend{\lyBgColor}{Black}{ELYSIUM}{9.8}{6.8}{Elysium}{$\star\star\star\star$};
\frontend{\lyBgColor}{Black}{FRESCOBALDI}{11.9}{6}{Frescobaldi}{$\star\star\star\star\star$};

% which are used by the Composer:

%
\node[rectangle, draw=none, inner sep=0pt] (Composer) at (8.3,15.5) 
{\includegraphics{./logos/decider-220x320.eps}};
  
% TOP DOWN linkings of the component IO structure:  
  
% (1) The composer uses the frontends.
\draw[->] (Composer) to [out=180,in=70] (EASYABC);  
\draw[->] (Composer) to [out=180,in=50] (ROSEGARDEN); 
\draw[->] (Composer) to [out=180,in=70] (MUSESCORE);  
\draw[->] (Composer) to [out=180,in=80] (DENEMO);  
\draw[->] (Composer) to [out=270,in=90] (CANORUS);  
\draw[->] (Composer) to [out=0,in=90] (ELYSIUM);  
\draw[->] (Composer) to [out=0,in=90] (FRESCOBALDI);  
\draw[->] (Composer) to [out=0,in=90] (EDITOR);  

 
% (2.A) The frontends write the frontend output  
\draw[->,\abcColor] (EASYABC) to [out=270,in=90] (FO-ABC); 
\draw[->,\abcColor] (EASYABC) to [out=240,in=140] (CO-ABC); 
\draw[->,\mxmlColor] (EASYABC) to [out=300,in=90] (FO-MXML); 

\draw[->,\lyColor] (ROSEGARDEN) to [out=300,in=90] (FO-LY); 
\draw[->,\mxmlColor] (ROSEGARDEN) to [out=240,in=90] (FO-MXML);

\draw[->,\mxmlColor] (MUSESCORE) to [out=240,in=90] (FO-MXML); 

\draw[->,\mxmlColor] (CANORUS) to [out=230,in=70] (FO-MXML); 
\draw[->,\lyColor] (CANORUS) to [out=270,in=90] (FO-LY); 

\draw[->,\mxmlColor] (DENEMO) to [out=240,in=90] (FO-MXML); 
\draw[->,\lyColor] (DENEMO) to [out=270,in=90] (FO-LY); 


\draw[->,\abcColor] (EDITOR) to [out=270,in=80] (CO-ABC);
\draw[->,\mtexColor] (EDITOR) to [out=270,in=0] (CO-MTEX);
\draw[->,\pmxColor] (EDITOR) to [out=270,in=90] (FO-PMX);

\draw[->,\lyColor] (EDITOR) to [out=270,in=90] (CO-LY);
\draw[->,\lyColor] (ELYSIUM) to [out=270,in=90] (CO-LY); 
\draw[->,\lyColor] (FRESCOBALDI) to [out=270,in=90] (CO-LY); 

% (3) The frontend output becomes input of the converter

\draw[->,\abcColor] (FO-ABC) to [out=270,in=90] (ABC2MTEX);
\draw[->,\abcColor] (FO-ABC) to [out=360,in=180] (ABC2LY);

\draw[->,\mxmlColor] (FO-MXML) to [out=270,in=90] (XML2ABC);
\draw[->,\mxmlColor] (FO-MXML) to [out=270,in=90] (MXML2ABC);
\draw[->,\mxmlColor] (FO-MXML) to [out=270,in=90] (MUSICXML2LY);
\draw[->,\mxmlColor] (FO-MXML) to [out=270,in=90] (XML2PMX);

%\draw[->,\lyColor] (FO-LY) to [out=270,in=90] (LY2ABC); 
%\draw[->,\lyColor] (FO-LY) to [out=270,in=90] (EDITOR); 
\draw[->,\lyColor] (FO-LY) to [out=360,in=90] (ELYSIUM); 
\draw[->,\lyColor] (FO-LY) to [out=360,in=90] (FRESCOBALDI); 

% (3) The converters (re)write their output
% (3.A) as input for the textual frontends
\draw[->,\lyColor] (ABC2LY) to [out=0,in=90] (FO-LY);
%\draw[->,\lyColor] (MXML2LY) to [out=0,in=90] (FO-LY); 
%\draw[->,\lyColor] (XML2LY) to [out=0,in=180] (FO-LY); 
\draw[->,\lyColor] (MUSICXML2LY) to [out=0,in=180] (FO-LY); 

% (3.B) as input for the backends

%\draw[->,\abcColor] (LY2ABC) to [out=270,in=90] (CO-ABC);
\draw[->,\abcColor] (XML2ABC) to [out=270,in=90] (CO-ABC);
\draw[->,\abcColor] (MXML2ABC) to [out=270,in=90] (CO-ABC);

\draw[->,\pmxColor] (XML2PMX) to [out=270,in=90] (FO-PMX);
\draw[->,\mtexColor] (ABC2MTEX) to [out=270,in=180] (CO-MTEX);

% special case MusiXTeX
\draw[->,\pmxColor] (FO-PMX) to [out=270,in=90] (PMXAB);
\draw[->,\mtexColor] (PMXAB) to [out=270,in=90] (CO-MTEX);

% 4) The backends take the (converter) output as input
\draw[->,\abcColor] (CO-ABC) to [out=270,in=90] (LTXABC);
\draw[->,\mtexColor] (CO-MTEX) to [out=270,in=90] (LTXMTEX);
\draw[->,\lyColor] (CO-LY) to [out=270,in=90] (LTXLIPO);

% 5) end write the final PDF

\draw[->,Black] (LTXABC) to [out=270,in=90] (PDF);
\draw[->,Black] (LTXMTEX) to [out=270,in=90] (PDF);
\draw[->,Black] (LTXLIPO) to [out=270,in=90] (PDF);
\end{tikzpicture}

Wir kennen demnach vier echte graphische Frontends -- \acc{Rosegarden},
\acc{MuseScore}, \acc{Denemo} und \acc{Canorus} --, drei semi-graphische
Frontends -- \acc{EasyABC}, \acc{Elysium} und \acc{Frescobaldi} --,  drei
Backendsysteme -- \acc{\LaTeX\,+\,ABC}, \acc{\LaTeX\,+\,MusiX\TeX} und
\acc{\LaTeX\,+\,LilyPond} -- und einige Konverter, mit denen wir die einen mit
den anderen verbinden können.

Wollten wir die Möglichkeiten systematisch evaluieren, müssten wir viele Wege
ausprobieren und bewerten, und zwar unabhängig davon, dass zuletzt nur
wenige davon wirklich hervorstechen werden. Glücklicherweise können wir den
Aufwand heuristisch reduzieren:

Als Musikwissenschaftler möchten wir Harmonieanalysen in der vollen Komplexität
der Funktionstheorie in unsere Notentexte und mit diesen in unsere \LaTeX-Texte
einbetten. Das war und ist unser Antrieb. Und die Möglichkeit zu solch einer
Darstellung bieten uns nur \acc{\LaTeX\,+\,MusiX\TeX\,+\,harmony} und
\acc{\LaTeX\,+\,LilyPond\,+\,harmonyli.ly}.

Für \acc{LilyPond\,+\,harmonyli.ly} steht uns \acc{Frescobaldi} als bester
semi-graphischer Editor zur Verfügung. Daneben gibt es das gleichermaßen
nutzbare Eclipseplugin \acc{Elysium}. Den Weg von \acc{Frescobaldi} nach
\acc{LilyPond} hatten wir implizit bereits erfolgreich getestet, als wir
\acc{Frescobald} vorgestellt haben, nutzt er doch direkt das Backend
\acc{LilyPond}, um die Eingaben zu visualisieren. 

Den direkten Weg von \acc{Elsysium} nach \acc{LilyPond} haben wir bei der
Erstellung dieses Dokuments erfolgreich verifiziert. Auf eine explizite
Dokumentation verzichten wir, weil auch \acc{Elsysium} als Editor zur
Visualisierung dieselbe Technik wie \acc{Frescobaldi} nutzt, nämlich die
Bordmittel von \acc{LilyPond}.

Obwohl wir das Backenendsystem \acc{ABC} von seiner eigenen Funktionalität her
für unsere Zwecke ausschließen dürfen -- es erlaubt ja nur die Eingabe sehr
einfach strukturierter Funktionssymbole --, könnte der semi-graphische Editor
\acc{EasyABC} trotzdem noch eine Rolle spielen: Zum einen gibt es den Konverter
\acc{abc2ly}, der das native ABC-Format von \acc{EasyABC} konvertieren können
will. Und zum anderen erlaubt \acc{EasyABC} den Export in das Format
\acc{musicxml}. Damit könnte der Konverter \acc{musicxml2ly} den Weg in die
\acc{LilyPond}-Welt öffnen.

Wollten wir \acc{LilyPond} stattdessen 'mit' echten einem graphischen Editor
benutzen, müssten wir überprüfen, ob der MusicXML-Export von \acc{MuseScore}
mittels des Konverters \acc{musicxml2ly} für \acc{Frescobaldi} respektive
\acc{Elysium} 'importierbar' wird.\footnote{Dass wir \acc{Frescobaldi} vzw.
\acc{Elysium} immer noch zwischenschalten müssen, folgt aus der Tatsache, dass
\acc{MuseScore} uns nur die Möglichkeit bietet, Basissymbole in den Notentext
einzubetten (etwa über \texttt{Add/Text/ChordSymbol} oder
\texttt{Add/Text/Lyrics}), nicht aber komplexe Harmoniesymbole mit hoch und tief
gestellten Zahlen.}

Für \acc{MusiX\TeX\,+harmony} stehen uns genuin nur (\LaTeX)-Editoren zur
Verfügung. Wollten wir also dieses Backendsystem 'mit' einem (semi-)graphischen
Editor knüpfen, zeigt uns die Wegekarte, dass nur \acc{EasyABC} als Frontend in
Frage käme und dass wir dafür testen müssten, ob der Output von EasyABC über den
Konverter \acc{abcmtex} zu \LaTeX-kompatiblen \acc{MusiX\TeX}-Code wird.

Diese Überlegungen reduzieren unsere 'Karte der Möglichkeiten' deutlich:

\begin{tikzpicture}
\footnotesize

\tikzstyle{every node}=[trapezium, draw, minimum width=1cm,trapezium left angle=70, trapezium right angle=110]

% BOTTOM UP DESCRIPTION of the component IO structure:
% THE FINALLY GENERATED PDF OUTPOUT ->
\file{\pdfBgColor}{black}{PDF}{5.5}{0}{.pdf}

% -> CREATED BY THE LATEX IDEs ->
\backend{$\star\star\star\star$}{\mtexColor}{LTXMTEX}{5.5}{2}{\LaTeX\,+\,MusiX\TeX}
\backend{$\star\star\star\star\star$}{\lyColor}{LTXLIPO}{10.4}{2}{\LaTeX\,+\,LilyPond}

% -> which take the CONVERTER OUTPUT ->
\file{\mtexBgColor}{\mtexColor}{CO-MTEX}{5.5}{3}{.mtex}
\file{\lyBgColor}{Blue}{CO-LY}{10.4}{3}{.ly}

% written by the CONVERTERs.

\converter{\mxmlInColor}{\lyOutColor}{MUSICXML2LY}{4.8}{8.8}{musicxml2ly}
\converter{\abcInColor}{\mtexOutColor}{ABC2MTEX}{3}{4}{abc2mtex}
\converter{\abcInColor}{\lyOutColor}{ABC2LY}{5}{10}{abc2ly}


% These converters takte the FRONTEND OUTPUT ->

\file{\abcBgColor}{\abcColor}{FO-ABC}{0}{10.8}{.abc}
\file{\mxmlBgColor}{\mxmlColor}{FO-MXML}{1.5}{10}{.mxml}
\file{\lyBgColor}{Blue}{FO-LY}{7}{8.8}{.ly}

% created by the FRONTENDS ->

\frontend{\abcBgColor}{Black}{EASYABC}{0}{12.5}{EasyABC}{$\star\star\star\star$};
\frontend{\multiBgColor}{Black}{MUSESCORE}{4.5}{13.5}{MuseScore}{$\star\star\star\star\star$};

\frontend{\multiBgColor}{Black}{EDITOR}{7.7}{7.2}{Text-Editor}{$\star$};
\frontend{\lyBgColor}{Black}{ELYSIUM}{9.8}{6.8}{Elysium}{$\star\star\star\star$};
\frontend{\lyBgColor}{Black}{FRESCOBALDI}{11.9}{6}{Frescobaldi}{$\star\star\star\star\star$};

% which are used by the Composer:

%
\node[rectangle, draw=none, inner sep=0pt] (Composer) at (8.3,15.5) 
{\includegraphics{./logos/decider-220x320.eps}};
  
% TOP DOWN linkings of the component IO structure:  
  
% (1) The composer uses the frontends.
\draw[->] (Composer) to [out=180,in=70] (EASYABC);  
\draw[->] (Composer) to [out=180,in=70] (MUSESCORE);   
\draw[->] (Composer) to [out=0,in=90] (ELYSIUM);  
\draw[->] (Composer) to [out=0,in=90] (FRESCOBALDI);  
\draw[->] (Composer) to [out=0,in=90] (EDITOR);  

 
% (2.A) The frontends write the frontend output  
\draw[->,\abcColor] (EASYABC) to [out=270,in=90] (FO-ABC); 
\draw[->,\mxmlColor] (EASYABC) to [out=300,in=90] (FO-MXML); 
\draw[->,\mxmlColor] (MUSESCORE) to [out=240,in=90] (FO-MXML); 
\draw[->,\mtexColor] (EDITOR) to [out=270,in=0] (CO-MTEX);
\draw[->,\lyColor] (ELYSIUM) to [out=270,in=90] (CO-LY); 
\draw[->,\lyColor] (FRESCOBALDI) to [out=270,in=90] (CO-LY); 

% (3) The frontend output becomes input of the converter
\draw[->,\abcColor] (FO-ABC) to [out=270,in=90] (ABC2MTEX);
\draw[->,\abcColor] (FO-ABC) to [out=360,in=180] (ABC2LY);
\draw[->,\mxmlColor] (FO-MXML) to [out=270,in=90] (MUSICXML2LY);


%\draw[->,\lyColor] (FO-LY) to [out=270,in=90] (LY2ABC); 
%\draw[->,\lyColor] (FO-LY) to [out=270,in=90] (EDITOR); 
\draw[->,\lyColor] (FO-LY) to [out=360,in=90] (ELYSIUM); 
\draw[->,\lyColor] (FO-LY) to [out=360,in=90] (FRESCOBALDI); 

% (3) The converters (re)write their output
% (3.A) as input for the textual frontends
\draw[->,\lyColor] (MUSICXML2LY) to [out=0,in=180] (FO-LY); 
\draw[->,\lyColor] (ABC2LY) to [out=0,in=90] (FO-LY);
% (3.B) as input for the backends
\draw[->,\mtexColor] (ABC2MTEX) to [out=270,in=180] (CO-MTEX);

% 4) The backends take the (converter) output as input
\draw[->,\mtexColor] (CO-MTEX) to [out=270,in=90] (LTXMTEX);
\draw[->,\lyColor] (CO-LY) to [out=270,in=90] (LTXLIPO);

% 5) end write the final PDF
\draw[->,Black] (LTXMTEX) to [out=270,in=90] (PDF);
\draw[->,Black] (LTXLIPO) to [out=270,in=90] (PDF);
\end{tikzpicture}


Wir können die Liste der damit anstehenden Evaluationen insofern noch
vereinfachen, als wir bereits wissen, dass \acc{Elysium} und \acc{Frescobaldi}
ihre \acc{LilyPond-Input-Datei} jeweils mit den \acc{LilyPond} genuinen
Techniken auswerten. Was das eine Frontend zu laden vermag, vermag also auch das
andere zu verstehen. Damit entsteht folgende Aufgabentabelle\footnote{Wir werden
die Wege nach folgender Systematik evaluieren: '++' möge für eine reibungslose
Nutzung stehen, '+' für eine Nutzung mit zusätzlichem Integrationsaufwand und
'-' für gescheiterte Nutzungsversuche. Für die direkten Wege \acc{Frescobaldi}
resp. \acc{Elysium} \ra\ \acc{LilyPond} können wir das Ergebnis '++' gleich so
eintragen, weil wir deren Nutzung ja schon vorgeführt resp. sinnfällig gemacht
haben.}:


\begin{footnotesize}

\begin{tabular}{|c||c|c|c|c|c||c||}

% was soll am Anfang oben scheinen:
\hline
  \multirow{2}{*}{\rotatebox{90}{Weg\ }} & \multicolumn{2}{c}{VON} & \multicolumn{1}{|c}{ÜBER} & 
  \multicolumn{2}{|c||}{NACH} & = \\
\cline{2-7}
 & Frontend & $\bigstar$ & Konvertierung & \LaTeX\ + & $\bigstar$ & \\
\hline
\hline
01 & EasyABC & 4 & \ra\ abc2mtex \ra\ & Musix\TeX\ & 4 &  \\
\hline
02/03 & EasyABC & 4 & \ra abc2ly \ra\ Frescobaldi/Elysium \ra\ & LilyPond & 5 &  \\
\hline
04/05 & EasyABC & 4 & \ra musicxml2ly \ra\ Frescobaldi/Elysium \ra\ & LilyPond & 5 &  \\
\hline
06/07 &  MuseScore & 5 & \ra musicxml2ly \ra\ Frescobaldi/Elysium \ra\ & LilyPond & 5 &  \\
\hline
08 &  Frescobaldi & 5 & \ra\ & LilyPond & 5 & \texttt{++}  \\
\hline
09 & Elysium & 4 & \ra\ & LilyPond & 5 & \texttt{++}  \\
\hline
\hline
\end{tabular}
\end{footnotesize}

 \vspace{1cm}
Wir haben unter \texttt{[\ldots]/musicology.de/chain-evaluation/} in den
Quellen zu diesem Dokument\footcite[vgl.][\nopage wp]{Reincke2019a} für jede
Variante einen wegspezifischen Ordner angelegt, in denen die Inputdatei für das
jeweilige Frontend und alle abgeleiteten Zwischendateien beleghalber
abgelegt sind. Zudem enthält der Ordner
\texttt{[\ldots]/musicology.de/chain-evaluation/} einen Subordner
\texttt{tools}, in dem zwecks Absicherung der Reproduzierbarkeit die Quellen
aller Konverter als Paket abgelegt sein.



% this is only inserted to eject fault messages in texlipse
%\bibliography{../bib/literature}
